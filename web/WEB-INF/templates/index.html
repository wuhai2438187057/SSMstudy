<!DOCTYPE html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org" >
<head>
    <meta charset="UTF-8" >
    <title>index</title>
    <link rel="stylesheet" th:href="@{/static/css/mycss.css}" type="text/css">
    <!-- æœ€æ–°ç‰ˆæœ¬çš„ Bootstrap æ ¸å¿ƒ CSS æ–‡ä»¶ -->
    <link crossorigin="anonymous" href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" rel="stylesheet">
    <!-- jQuery (Bootstrap çš„æ‰€æœ‰ JavaScript æ’ä»¶éƒ½ä¾èµ– jQueryï¼Œæ‰€ä»¥å¿…é¡»æ”¾åœ¨å‰è¾¹) -->
    <script crossorigin="anonymous" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
    <!-- æœ€æ–°çš„ Bootstrap æ ¸å¿ƒ JavaScript æ–‡ä»¶ -->
    <script crossorigin="anonymous" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js"></script>


</head>
<body>

<div class="top-section" style="padding-top: 7px;">
    <table border="1">
        <tr>
            <th style="background-color: green"  >
   <span style="text-align: left; font-size: 30px;"><strong>TOMç‰Œç®¡ç†ç³»ç»Ÿ</strong></span>
            </th>
        </tr>
    </table>
</div>


<div class="left-section" >
    <div class="list-group" >
    <a th:href="@{/dayafter}"><img alt="å¤´åƒå›¾ç‰‡" class="img-circle" th:src="@{/static/img/032.png}" title="ä¸ªäººç©ºé—´" width="180"></a>
     <h5  style="color: teal;text-align: center" th:text="'æ¬¢è¿æ‚¨,'+${session.username}"></h5>
   <strong> <p style="color: slateblue">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p></strong>
    <a class="list-group-item active" th:href="@{/employeeManger/1}">
        <h4 class="list-group-item-heading">
            ğŸ™ğŸ»â€â™‚ï¸ å‘˜å·¥ç®¡ç†&nbsp; &nbsp; &nbsp; &nbsp;  â–¶
        </h4>
</a>
    <a class="list-group-item" th:href="@{/dayafter}">
        <h4 class="list-group-item-heading">
           ğŸ’° è®¢å•ç®¡ç†&nbsp; &nbsp; &nbsp; &nbsp;  â–¶
        </h4>
    </a>
    <a class="list-group-item active" th:href="@{/dayafter}">
        <h4 class="list-group-item-heading">
            ğŸ“• å•†å“ç®¡ç†&nbsp; &nbsp; &nbsp; &nbsp;  â–¶
        </h4>
    </a>
    <a class="list-group-item" th:href="@{/dayafter}">
        <h4 class="list-group-item-heading">
          ğŸ”ˆ é€šçŸ¥å…¬å‘Š&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;â–¶
        </h4>
    </a>
    </div>
</div>


<div class="right-section" style="position: relative" >

    <div style="margin-top: 10px;margin-left:10px">
    <span style="color: tomato ;" >
       <strong>ç®¡ç†ç³»ç»Ÿâ†’<p2 th:text="${pageName}"></p2></strong>
    </span>
    </div>


    <form class="form-inline" method="get" style="margin-left: 400px" th:action="@{/employeeMangerOperate}">
        <div class="form-group">
            <label class="sr-only" for="idName">id</label>
            IdæŸ¥è¯¢:<input class="form-control" id="idName" name="employeeId" placeholder="è¯·è¾“å…¥id" type="number">
        </div>

        <div class="form-group">
            <label class="sr-only" for="name">å§“å</label>
            å§“åæŸ¥è¯¢:<input class="form-control" id="name" name="employeeName" placeholder="è¯·è¾“å…¥å§“å" type="text">
        </div>

        <button class="btn btn-default" type="submit">æŸ¥è¯¢</button>
    </form>

    <span style="margin-left: 50px">

 <button class="btn btn-success"   data-target="#myModal" data-toggle="modal">æ·»åŠ å‘˜å·¥</button>
 <div aria-hidden="true" aria-labelledby="myModalLabel" class="modal fade" id="myModal" role="dialog" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button aria-hidden="true" class="close" data-dismiss="modal" type="button">&times;</button>
                <h4 class="modal-title" id="myModalLabel">æ·»åŠ ç”¨æˆ·</h4>
            </div>
            <div class="modal-body" style="margin-left: 120px">
                <form method="post" th:action="@{/employeeMangerOperate}" >
                    å§“å:<input name="empName" type="text" ><br><br>
                    å¹´é¾„:<input name="age" type="number"><br><br>
                    æ€§åˆ«:&nbsp;&nbsp;
                    <label for="sexç”·">ç”·</label>
                    <input id="sexç”·" name="sex" type="radio" value="ç”·">
                    <label for="sexå¥³">å¥³</label>
                    <input id="sexå¥³" name="sex" type="radio" value="å¥³"><br><br>
                    é‚®ç®±:<input name="email" type="text"><br>
                    <div class="modal-footer">
                <button class="btn btn-default" data-dismiss="modal" type="button">å–æ¶ˆ</button>
                <button  class="btn btn-primary" type="submit">ç¡®è®¤æ·»åŠ </button>
            </div>
                </form>
            </div>

        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>

        <button class="btn btn-success" onclick="deleteSelected()" type="button">æ‰¹é‡åˆ é™¤</button>

    </span>
<span >
   <strong><p style=" margin-left: 725px;color:green" th:text="'['+${formInfo}+']'"></p></strong>

    <strong><p style="padding-bottom: -350px;margin-left: 725px;color:green"  th:text="'[å‘˜å·¥æ€»æ•°:'+${pageInfo.total}+']'"></p></strong>


</span>

    <div id="app1" style="margin-top: 5px ;margin-left:20px;margin-right: 20px;background-color: ghostwhite ;height: 65%" >
      <table  class="table table-bordered" id="table">
         <tr>
             <th>å…¨é€‰ <input  id="ids1" type="checkbox"  ></th>
             <th>ID</th>
             <th>å§“å</th>
             <th>å¹´é¾„</th>
             <th>æ€§åˆ«</th>
             <th>é‚®ä»¶</th>
             <th>æ“ä½œ</th>
         </tr>
          <tr  th:each="data :${pageInfo.list}">
              <td><input class="checkbox" name="ids2"  th:value="${data.empId}" type="checkbox"></td>
              <td th:text="${data.empId}"></td>
              <td th:text="${data.empName}"></td>
              <td th:text="${data.age}"></td>
              <td th:text="${data.sex}"></td>
              <td th:text="${data.email}"></td>
              <td>
                  <a  class="abutn" th:href="@{'/employeeMangerOperateUpdatePage/'+${data.empId}}"> ä¿®æ”¹</a>
                  <a  @click="deleteEmployee" class="abutn" th:href="@{'/employeeMangerOperate/'+${data.empId}}" > åˆ é™¤</a>
<!--                  è¿™ä¸¤ä¸ªè¦restfulé£æ ¼-->
              </td>
          </tr>
      </table>
     <form id="delete_form" method="post">
         <input name="_method" type="hidden" value="delete">
     </form>
     <div style="text-align: center">
          <a th:href="@{/employeeManger/1}" th:if="${pageInfo.hasPreviousPage}">é¦–é¡µ</a>
         <a th:href="@{'/employeeManger/'+${pageInfo.prePage}}" th:if="${pageInfo.hasPreviousPage}">ä¸Šä¸€é¡µ</a>
         <span th:each="num :${pageInfo.navigatepageNums}">
             <a style="color: blue" th:href="@{'/employeeManger/'+${num}}" th:if="${pageInfo.pageNum==num}" th:text="'['+${num}+']'"></a>
             <a style="color: green" th:href="@{'/employeeManger/'+${num}}" th:if="${pageInfo.pageNum!=num}" th:text="${num}"></a>
         </span>
         <a th:href="@{'/employeeManger/'+${pageInfo.nextPage}}" th:if="${pageInfo.hasNextPage}">ä¸‹ä¸€é¡µ</a>
         <a th:href="@{'/employeeManger/'+${pageInfo.pages}}" th:if="${pageInfo.hasNextPage}">æœ«é¡µ</a>
     </div>

 </div>

</div>

</body>

<script th:src="@{/static/js/vue.js}" type="text/javascript"></script>
<script th:src="@{/static/js/axios.min.js}" type="text/javascript"></script>
<script>

    new Vue({
        el:"#app1",
        methods:{
            deleteEmployee:function (event){
                var delete_form = document.getElementById("delete_form");
                 delete_form.action=event.target.href;
                 delete_form.submit();
                 event.preventDefault();
            }
        }

    })

    $("#ids1").click(function(){//ç»™å…¨é€‰æŒ‰é’®åŠ ä¸Šç‚¹å‡»äº‹ä»¶
        var xz = $(this).prop("checked");//åˆ¤æ–­å…¨é€‰æŒ‰é’®çš„é€‰ä¸­çŠ¶æ€
        var ck = $(".checkbox").prop("checked",xz);  //è®©classåä¸ºqxçš„é€‰é¡¹çš„é€‰ä¸­çŠ¶æ€å’Œå…¨é€‰æŒ‰é’®çš„é€‰ä¸­çŠ¶æ€ä¸€è‡´ã€‚
    })


    function deleteSelected (){
        var allSelectedItems =document.getElementsByClassName("checkbox");
        var selectedItems=[];
        var ids ;
        if (confirm("æ‚¨ç¡®å®šè¦åˆ é™¤å—")) {
            for (let i = 0; i < allSelectedItems.length; i++) {
                if (allSelectedItems[i].checked==true) {
                    selectedItems.push(allSelectedItems[i].value);
                }
            }
            if (selectedItems.length==0){
                alert("è‡³å°‘é€‰æ‹©åˆ é™¤ä¸€æ¡æ•°æ®")
                return;
            }else {
                alert("å·²é€‰æ‹©åˆ é™¤"+selectedItems.length+"æ¡æ•°æ®")
            }

            ids=selectedItems.toString();
            axios({
                method: "get",
                url: `http://localhost:8080/SSMstudy/employeeMangerOPeratedelBatch/${ids}`,
            }).then(function(response) {
                if (response.status === 200) {
                    // åˆ é™¤æˆåŠŸçš„å¤„ç†é€»è¾‘
                    console.log("åˆ é™¤æˆåŠŸ");
                    // åˆ·æ–°é¡µé¢
                    // è¿™é‡Œä¾ç„¶å­˜åœ¨ç–‘é—®ï¼Œå› ä¸ºå°†åå°çš„å¤„ç†é‡å®šå‘åˆ°employeeManger/1ååè€Œæ­£å¸¸ï¼Œç›´æ¥è¿”å›indexæ˜¯ä¸è¡Œçš„
                    location.replace("http://localhost:8080/SSMstudy/employeeManger/1");
                } else {
                    // åˆ é™¤å¤±è´¥çš„å¤„ç†é€»è¾‘
                    console.log("åˆ é™¤å¤±è´¥");
                }
            }).catch(function(error) {
                // é”™è¯¯å¤„ç†é€»è¾‘
                console.log("è¯·æ±‚å‡ºé”™"+error);
            });
        }
          }






</script>


</html>